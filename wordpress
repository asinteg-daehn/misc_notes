(1) Install webserver 
    see install.ubuntu.intrepid
- also, needs the php5-gd library
  apt-get install php5-gd

(2) Install mysql-server
apt-get install mysql-server

(3) Download and unzip wordpress
- download
http://wordpress.org/download/

- unzip it to the DocumentRoot

(4) Set up wordpress database for site

CREATE DATABASE fishhouse_wordpress;
 
GRANT ALL PRIVILEGES ON fishhouse_wordpress.* TO "fishhouse_wpuser"@"localhost" IDENTIFIED BY "password";
  
FLUSH PRIVILEGES;

---

CREATE DATABASE mattcaron_wordpress;

GRANT ALL PRIVILEGES ON mattcaron_wordpress.* TO "mattcaron_wpuser"@"localhost" IDENTIFIED BY "";
  
FLUSH PRIVILEGES;

(5) set up the config

cd wordpress

mv wp-config-sample.php wp-config.php

- edit wp-config.php and 
  - set it up to reflect your db stuff.
  - generate 4 unique keys and populate the various _KEY values. You
    don't need to remember or save them or anything.

(6) Run the installer by going to something wordpress-ey.

(7) fix perms

chmod -R go+rX /home/matt/public_html/www.fishhousefishandgame.com
chmod -R go+rw /home/matt/public_html/www.fishhousefishandgame.com/wordpress/wp-content/uploads

(8) Relocating wordpress to a subdirectory

(a) From the parent:
cp wordpress/.htaccess
cp wordpress/index.php

(b) edit ./index.php and change:
require('./wp-blog-header.php');
to
require('./wordpress/wp-blog-header.php');

(c) edit wordpress/wp-config.php and add the following (AT THE TOP!)

// ** Hostname settings ** //
define('WP_SITEURL', "http://${_SERVER['HTTP_HOST']}/wordpress");
define('WP_HOME',    "http://${_SERVER['HTTP_HOST']}");

(9) Setting it up locally

/etc/apache2/sites-available

- set up an appropriate config file with a name based virtual host, like:

<VirtualHost *:80>
    ServerName www.mattcaron.net
    ServerAdmin webmaster@localhost
    
    DocumentRoot /home/matt/public_html/www.mattcaron.net
    <Directory /home/matt/public_html/www.mattcaron.net>
	Options Indexes FollowSymLinks MultiViews
	Order allow,deny
	allow from all
    </Directory>

    RewriteLog /var/log/apache2/rewrite.log
    RewriteLogLevel 8
</VirtualHost>


- 

a2ensite <site>


/etc/init.d/apache2 reload
(9) Backing up database

mysqldump --add-drop-table -u fishhouse_wpuser -p fishhouse_wordpress | bzip2 \
-c > fishhouse.bak.sql.bz2

(10) Setting up a db on hosting machine
csoftadm
db mysql useradd fishhouse_wpuser
db mysql add fishhouse_wordpress
db mysql grant fishhouse_wordpress fishhouse_wpuser all

- push the db
bzcat fishhouse.bak.sql.bz2 | \
mysql -u fishhouse_wpuser -p fishhouse_wordpress

- turn on logs on webserver
conf set errlog yes

- turn on php5-fat
web php select php5-fat


TODO:
- events calendar
- fix the case of the subtitle above
- caching plugin
- backup script


DOCUMENT:
- relocation stuff
  - including wp-uploads path change
- ssl tunnel/vhosts/etc/hosts/etc.
- local webserver setup (sites-enabled, a2enmod rewrite, etc.)







============== deprecated =============


- edit .htaccess and change the RewriteBase

RewriteBase /fishhouse/

- add the following to the config (AT THE TOP!!)

- for testing

// ** Hostname settings ** //
define('WP_SITEURL', "http://${_SERVER['HTTP_HOST']}/~matt/www.fishhousefishandgame.com");
define('WP_HOME',    "http://${_SERVER['HTTP_HOST']}/~matt/www.fishhousefishandgame.com");

- for live (stagingish)

// ** Hostname settings ** //
define('WP_SITEURL', "http://${_SERVER['HTTP_HOST']}/fishhouse");
define('WP_HOME',    "http://${_SERVER['HTTP_HOST']}/fishhouse");

- in the db, do

UPDATE wp_options 
   SET option_value="http://broken" 
 WHERE option_name = "siteurl";

UPDATE wp_options 
   SET option_value="http://broken" 
 WHERE option_name = "home";

-- DEPRECATED --

- in the DB, for prod, do:
UPDATE wp_options 
   SET option_value="http://www.mattcaron.net/fishhouse" 
 WHERE option_name = "siteurl";

UPDATE wp_options 
   SET option_value="http://www.mattcaron.net/fishhouse" 
 WHERE option_name = "home";

- and for test do:

UPDATE wp_options 
   SET option_value="http://localhost/~matt/www.fishhousefishandgame.com" 
 WHERE option_name = "siteurl";

UPDATE wp_options 
   SET option_value="http://localhost/~matt/www.fishhousefishandgame.com" 
 WHERE option_name = "home";

- The problem is that, even though the wp-config.php allows for 



Lists:
http://www.clazh.com/best-customizable-multiple-color-styles-wordpress-themes/
http://www.clazh.com/top-best-beautiful-wordpress-themes-templates/
http://www.sueblimely.com/flexible-customizable-wordpress-themes/

Potentials:
http://gluedideas.com/

Hunter theme (check license)
http://frontierwebdesign.com/2008/01/hunter-wordpress-theme/

http://themes.floridakeysnews.info/2007/09/22/hunting-wordpress-theme/

Generator:
http://www.yvoschaap.com/wpthemegen/

How to customize stuff:
http://performancing.com/design/templates/how-to-customize-wordpress-part-1





--- LJ backup & import into wordpress ---

http://heinous.org/wiki/LiveJournal_XML_Export_Script

apt-get install libsoap-lite-perl libwww-mechanize-perl libdate-manip-perl

- edit ljexport.pl and find the getXML function. Edit the form_number
  and set it to 2.

- Run it and follow instructions.

- Remove any private entries.

- Log into LJ admin console and do:

Tools -> import -> livejournal import

- Note the maximum file size. You may need to up it in php.ini. You
  may also need to set the memory limit higher to.


--- Sync needs php-curl ---

apt-get install php5-curl

-- Mine TODO:

VERY VERY VERY VERY IMPORTANT:

- pull DB FROM LEARY
- UPDATE LOCAL

Then do:
 - Reimport of XML to get the ljID's right
 - Resync of comments to get those right
 - Make sure the ljID is recorded when we crosspost (I don't think it is..)

- caching
- lj comment sync
  - fix pathing better
- Mirror LJ categories

WRITE UP:

- The fancy new dynamic thingamajobber


UPDATE wp_options 
   SET option_value="http://www.mattcaron.net/wordpress" 
 WHERE option_name = "siteurl";

UPDATE wp_options 
   SET option_value="http://www.mattcaron.net" 
 WHERE option_name = "home";

--- Caching ---

- follow the instructions
- you need to enable the headers and expires modules:

a2enmod headers
a2enmod expires


Caching:
http://wordpress.org/extend/plugins/wp-super-cache/
http://ibloggedthis.com/2006/05/20/wordpress-caching-how-to/
http://www.arnebrachhold.de/2007/02/16/four-plus-one-ways-to-speed-up-the-performance-of-wordpress-with-caching/
